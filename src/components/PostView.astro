---
import PostViewTitle from '@/components/PostViewTitle.astro'
import DraftIndicator from '@/components/DraftIndicator.astro'
import {isDraft, isDevelopment} from '@/utils/getCollectionByName'
import getUrl from "@/utils/getUrl";
const {blog} = Astro.props;
const {data, slug} = blog
---

<div class={`my-5 first:mt-0 ${isDraft(blog) ? 'draft-post' : ''}`}>
  <div class="flex items-start gap-3">
    <div class="flex-1">
      <PostViewTitle
        slug={getUrl("/blog/") + slug}
        {...data}
      >
      </PostViewTitle>
      <p class="break-all text-skin-base line-clamp-3">
        {
          data.description ? data.description : ''
        }
      </p>
    </div>
    <DraftIndicator isDraft={isDraft(blog)} variant="small" />
  </div>
</div>
<div class="divider-horizontal-mini"></div>

<style>
  .draft-post {
    position: relative;
    opacity: 0.8;
    border-left: 3px solid #fbbf24;
    padding-left: 1rem;
    background: linear-gradient(90deg, rgba(251, 191, 36, 0.05) 0%, transparent 100%);
    border-radius: 0.375rem;
  }

  .draft-post::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border: 1px dashed #fbbf24;
    border-radius: 0.375rem;
    opacity: 0.3;
    pointer-events: none;
  }
</style>

